<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathsFacile - √âquations</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 12px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        /* Navigation */
        .nav {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .nav a {
            color: white;
            text-decoration: none;
            padding: 8px 14px;
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.2s;
        }

        .nav a:hover {
            background: rgba(255,255,255,0.25);
        }

        .nav a.active {
            background: rgba(255,255,255,0.35);
            font-weight: 600;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 16px;
        }

        h1 {
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
            margin-bottom: 4px;
        }

        .subtitle {
            font-size: 1.1em;
            font-weight: 600;
            opacity: 0.95;
            margin-bottom: 12px;
        }

        .intro {
            font-size: 1em;
            opacity: 0.9;
            line-height: 1.5;
            max-width: 400px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        /* Type selector */
        .type-selector {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            margin-bottom: 16px;
        }

        .type-btn {
            padding: 12px 8px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .type-btn .example {
            font-family: 'Courier New', monospace;
            font-size: 1em;
            font-weight: 600;
            color: #333;
        }

        .type-btn .label {
            font-size: 0.75em;
            color: #888;
            margin-top: 4px;
        }

        .type-btn.active {
            border-color: #667eea;
            background: #f0f3ff;
        }

        .type-btn.active .example {
            color: #667eea;
        }

        /* Coefficients */
        .coefficients {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .coef-group {
            flex: 1;
            min-width: 60px;
        }

        .coef-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 4px;
            color: #555;
            font-size: 0.85em;
        }

        .coef-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
            text-align: center;
        }

        .coef-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        /* Equation display */
        .expression-display {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 16px;
        }

        .expression {
            font-size: 1.5em;
            font-weight: 600;
            color: #333;
            font-family: 'Courier New', monospace;
        }

        /* Buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-generate {
            background: #e8e8e8;
            color: #333;
        }

        .btn-solve {
            background: #667eea;
            color: white;
        }

        /* Solution */
        .solution {
            margin-top: 16px;
            display: none;
        }

        .solution.show {
            display: block;
        }

        .solution h3 {
            color: #28a745;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .step {
            background: #f9f9f9;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .step-equation {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .step-explanation {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .verification {
            background: #fff8e1;
            border-left: 3px solid #ffc107;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .verification-title {
            color: #f57c00;
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 0.95em;
        }

        .alert-warning {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
            padding: 12px;
            border-radius: 8px;
            color: #856404;
        }

        .alert-info {
            background: #d1ecf1;
            border-left: 3px solid #17a2b8;
            padding: 12px;
            border-radius: 8px;
            color: #0c5460;
        }

        .hidden { display: none; }

        /* Mobile */
        @media (max-width: 400px) {
            body { padding: 8px; }
            .card { padding: 12px; }
            h1 { font-size: 1.7em; }
            .expression { font-size: 1.2em; }
            .coef-group { min-width: 50px; }
            .coef-group input { padding: 8px; font-size: 0.95em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a href="index.html" class="active">√âquations</a>
            <a href="developpement.html">D√©veloppement</a>
            <a href="reduction.html">R√©duction</a>
            <a href="factorisation.html">Factorisation</a>
        </nav>

        <header>
            <h1>üéì √âquations</h1>
            <p class="subtitle">Exercices interactifs</p>
            <p class="intro">Entra√Æne-toi √† r√©soudre des √©quations du 1er degr√©.<br>Choisis un type, modifie les valeurs si tu veux, puis clique sur <strong>Correction</strong> pour voir les √©tapes.</p>
        </header>

        <div class="card">
            <div class="type-selector">
                <button class="type-btn active" data-type="type1">
                    <div class="example">ax + b = c</div>
                    <div class="label">√âquation simple</div>
                </button>
                <button class="type-btn" data-type="type2">
                    <div class="example">ax + b = cx + d</div>
                    <div class="label">√âquation avec x des deux c√¥t√©s</div>
                </button>
            </div>

            <!-- Coefficients Type 1 -->
            <div class="coefficients" id="coeffType1">
                <div class="coef-group">
                    <label>a</label>
                    <input type="number" id="a1" value="2">
                </div>
                <div class="coef-group">
                    <label>b</label>
                    <input type="number" id="b1" value="3">
                </div>
                <div class="coef-group">
                    <label>c</label>
                    <input type="number" id="c1" value="7">
                </div>
            </div>

            <!-- Coefficients Type 2 -->
            <div class="coefficients hidden" id="coeffType2">
                <div class="coef-group">
                    <label>a</label>
                    <input type="number" id="a2" value="3">
                </div>
                <div class="coef-group">
                    <label>b</label>
                    <input type="number" id="b2" value="5">
                </div>
                <div class="coef-group">
                    <label>c</label>
                    <input type="number" id="c2" value="2">
                </div>
                <div class="coef-group">
                    <label>d</label>
                    <input type="number" id="d2" value="11">
                </div>
            </div>

            <div class="expression-display">
                <div class="expression" id="expressionDisplay">2x + 3 = 7</div>
            </div>

            <div class="action-buttons">
                <button class="btn-generate" id="generateBtn">üé≤ Nouveau</button>
                <button class="btn-solve" id="solveBtn">‚úì Correction</button>
            </div>

            <div class="solution" id="solutionDiv">
                <h3>üìù R√©solution</h3>
                <div id="stepsContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // √âtat
        let currentType = 'type1';

        // √âl√©ments
        const $ = id => document.getElementById(id);
        const typeButtons = document.querySelectorAll('.type-btn');

        // G√©n√©ration de coefficients
        function randCoef(avoidZero = false) {
            let n;
            do {
                n = Math.floor(Math.random() * 21) - 10;
            } while (avoidZero && n === 0);
            return n;
        }

        // Formatage
        function formatTerm(coef, variable, isFirst) {
            if (coef === 0 && variable) return '';
            
            const sign = isFirst ? (coef < 0 ? '‚àí' : '') : (coef > 0 ? ' + ' : ' ‚àí ');
            const abs = Math.abs(coef);
            
            if (variable) {
                if (abs === 1) return sign + variable;
                return sign + abs + variable;
            }
            return sign + abs;
        }

        function formatNumber(num) {
            if (Number.isInteger(num)) return num;
            return Math.round(num * 1000) / 1000;
        }

        function formatFraction(num, den) {
            if (den === 1) return num.toString();
            if (den === -1) return (-num).toString();
            
            const gcd = (a, b) => b === 0 ? Math.abs(a) : gcd(b, a % b);
            const d = gcd(num, den);
            let n = num / d, de = den / d;
            
            if (de < 0) { n = -n; de = -de; }
            if (de === 1) return n.toString();
            return `${n}/${de}`;
        }

        // Obtenir l'√©quation
        function getEquation() {
            if (currentType === 'type1') {
                return {
                    type: 'type1',
                    a: parseFloat($('a1').value) || 0,
                    b: parseFloat($('b1').value) || 0,
                    c: parseFloat($('c1').value) || 0
                };
            } else {
                return {
                    type: 'type2',
                    a: parseFloat($('a2').value) || 0,
                    b: parseFloat($('b2').value) || 0,
                    c: parseFloat($('c2').value) || 0,
                    d: parseFloat($('d2').value) || 0
                };
            }
        }

        // Afficher l'√©quation
        function updateDisplay() {
            const eq = getEquation();
            let display = '';
            
            if (eq.type === 'type1') {
                display = formatTerm(eq.a, 'x', true) + formatTerm(eq.b, '', false) + ' = ' + eq.c;
            } else {
                display = formatTerm(eq.a, 'x', true) + formatTerm(eq.b, '', false) + 
                         ' = ' + formatTerm(eq.c, 'x', true) + formatTerm(eq.d, '', false);
            }
            
            $('expressionDisplay').textContent = display;
            $('solutionDiv').classList.remove('show');
        }

        // G√©n√©rer al√©atoire
        function generate() {
            if (currentType === 'type1') {
                $('a1').value = randCoef(true);
                $('b1').value = randCoef();
                $('c1').value = randCoef();
            } else {
                const a = randCoef(true);
                let c;
                do { c = randCoef(true); } while (a === c && Math.random() > 0.15);
                
                $('a2').value = a;
                $('b2').value = randCoef();
                $('c2').value = c;
                $('d2').value = randCoef();
            }
            updateDisplay();
        }

        // R√©soudre
        function solve() {
            const eq = getEquation();
            let html = '';
            
            if (eq.type === 'type1') {
                html = solveType1(eq.a, eq.b, eq.c);
            } else {
                html = solveType2(eq.a, eq.b, eq.c, eq.d);
            }
            
            $('stepsContainer').innerHTML = html;
            $('solutionDiv').classList.add('show');
        }

        function solveType1(a, b, c) {
            let html = '';
            
            html += `<div class="step">
                <div class="step-equation">${formatTerm(a, 'x', true)}${formatTerm(b, '', false)} = ${c}</div>
                <div class="step-explanation">√âquation de d√©part</div>
            </div>`;
            
            if (a === 0) {
                if (b === c) {
                    html += `<div class="alert-info"><strong>‚ôæÔ∏è Infinit√© de solutions</strong><br>L'√©quation ${b} = ${c} est toujours vraie.</div>`;
                } else {
                    html += `<div class="alert-warning"><strong>‚àÖ Aucune solution</strong><br>L'√©quation ${b} = ${c} est impossible.</div>`;
                }
                return html;
            }
            
            if (b !== 0) {
                const sign = b > 0 ? 'soustrait' : 'ajoute';
                html += `<div class="step">
                    <div class="step-equation">${formatTerm(a, 'x', true)} = ${c - b}</div>
                    <div class="step-explanation">On ${sign} ${Math.abs(b)} des deux c√¥t√©s</div>
                </div>`;
            }
            
            const num = c - b;
            const result = num / a;
            
            if (a !== 1) {
                html += `<div class="step">
                    <div class="step-equation">x = ${formatFraction(num, a)}</div>
                    <div class="step-explanation">On divise par ${a}</div>
                </div>`;
            }
            
            if (!Number.isInteger(result) && Math.abs(a) > 1) {
                html += `<div class="step">
                    <div class="step-equation">x = ${formatNumber(result)}</div>
                    <div class="step-explanation">En d√©cimal</div>
                </div>`;
            }
            
            const verif = a * result + b;
            html += `<div class="verification">
                <div class="verification-title">‚úì V√©rification</div>
                <div>${a} √ó ${formatNumber(result)} + ${b} = ${formatNumber(verif)}</div>
            </div>`;
            
            return html;
        }

        function solveType2(a, b, c, d) {
            let html = '';
            
            html += `<div class="step">
                <div class="step-equation">${formatTerm(a, 'x', true)}${formatTerm(b, '', false)} = ${formatTerm(c, 'x', true)}${formatTerm(d, '', false)}</div>
                <div class="step-explanation">√âquation de d√©part</div>
            </div>`;
            
            const newA = a - c;
            
            if (c !== 0) {
                const sign = c > 0 ? 'soustrait' : 'ajoute';
                html += `<div class="step">
                    <div class="step-equation">${formatTerm(newA, 'x', true)}${formatTerm(b, '', false)} = ${d}</div>
                    <div class="step-explanation">On ${sign} ${Math.abs(c)}x des deux c√¥t√©s</div>
                </div>`;
            }
            
            if (newA === 0) {
                if (b === d) {
                    html += `<div class="alert-info"><strong>‚ôæÔ∏è Infinit√© de solutions</strong><br>L'√©quation ${b} = ${d} est toujours vraie.</div>`;
                } else {
                    html += `<div class="alert-warning"><strong>‚àÖ Aucune solution</strong><br>L'√©quation ${b} = ${d} est impossible.</div>`;
                }
                return html;
            }
            
            const newC = d - b;
            
            if (b !== 0) {
                const sign = b > 0 ? 'soustrait' : 'ajoute';
                html += `<div class="step">
                    <div class="step-equation">${formatTerm(newA, 'x', true)} = ${newC}</div>
                    <div class="step-explanation">On ${sign} ${Math.abs(b)} des deux c√¥t√©s</div>
                </div>`;
            }
            
            const result = newC / newA;
            
            if (newA !== 1) {
                html += `<div class="step">
                    <div class="step-equation">x = ${formatFraction(newC, newA)}</div>
                    <div class="step-explanation">On divise par ${newA}</div>
                </div>`;
            }
            
            if (!Number.isInteger(result) && Math.abs(newA) > 1) {
                html += `<div class="step">
                    <div class="step-equation">x = ${formatNumber(result)}</div>
                    <div class="step-explanation">En d√©cimal</div>
                </div>`;
            }
            
            const verifL = a * result + b;
            const verifR = c * result + d;
            html += `<div class="verification">
                <div class="verification-title">‚úì V√©rification</div>
                <div>Gauche: ${a} √ó ${formatNumber(result)} + ${b} = ${formatNumber(verifL)}</div>
                <div>Droite: ${c} √ó ${formatNumber(result)} + ${d} = ${formatNumber(verifR)}</div>
            </div>`;
            
            return html;
        }

        // Events
        typeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                typeButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentType = btn.dataset.type;
                
                $('coeffType1').classList.toggle('hidden', currentType !== 'type1');
                $('coeffType2').classList.toggle('hidden', currentType !== 'type2');
                
                updateDisplay();
            });
        });

        $('generateBtn').addEventListener('click', generate);
        $('solveBtn').addEventListener('click', solve);
        
        document.querySelectorAll('input').forEach(inp => {
            inp.addEventListener('input', updateDisplay);
        });

        // Init
        updateDisplay();
    </script>
</body>
</html>
